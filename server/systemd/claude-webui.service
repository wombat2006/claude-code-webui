# SystemD service file for Claude Code WebUI
# Place this file in /etc/systemd/system/

[Unit]
Description=Claude Code WebUI Server
After=network.target redis.service
Wants=redis.service

[Service]
Type=simple
User=claude
Group=claude
WorkingDirectory=/opt/claude-webui/server
Environment=NODE_ENV=production
EnvironmentFile=/opt/claude-webui/server/.env.production
ExecStart=/usr/bin/node dist/index.js
ExecReload=/bin/kill -USR1 $MAINPID
Restart=always
RestartSec=10
StandardOutput=journal
StandardError=journal
SyslogIdentifier=claude-webui

# Security settings
NoNewPrivileges=yes
PrivateTmp=yes
ProtectSystem=strict
ProtectHome=yes
ReadWritePaths=/var/lib/claude-sessions /var/log/claude-webui
CapabilityBoundingSet=CAP_NET_BIND_SERVICE

# Resource limits
LimitNOFILE=65536
MemoryMax=1G
CPUQuota=50%

[Install]
WantedBy=multi-user.target